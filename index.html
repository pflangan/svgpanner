<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
	<style>
		body {
			font: 18px/1.6 'Roboto', sans-serif;
			background: #f2f2f2;
			color: #3a3a3a;
			padding: 20px 40px;
		}

		svg {
			fill: #49b293;
		}
	</style>
	<script>
		const originalZoom = "0 0 100 100";
		const [oMinX, oMinY, oWidth, oHeight] = originalZoom.split(" ").map(Number);
		var dragging = false;
		var dragStart = {
			x: null,
			y: null
		};
		$('#zoomout').on('click', (e) => {
			const shape = document.getElementById("box");
			var viewBoxProperties = shape.getAttribute("viewBox");
			console.log(viewBoxProperties);
			var [minx, miny, width, height] = shape.getAttribute("viewBox").split(" ").map(Number);
			// console.log(minx);
			width += 10;
			// minx += 10;
			// miny += 10;
			height += 10;
			width = Math.min(100, height);
			height = Math.min(100, height);
			viewBoxProperties = `${minx} ${miny} ${width} ${height}`;
			console.log(viewBoxProperties);
			shape.setAttribute("viewBox", viewBoxProperties);
		});

		$('#zoomin').on('click', (e) => {
			const shape = document.getElementById("box");
			var viewBoxProperties = shape.getAttribute("viewBox");
			console.log(viewBoxProperties);
			var [minx, miny, width, height] = shape.getAttribute("viewBox").split(" ").map(Number);
			// console.log(minx);
			width -= 10;
			// minx -= 10;
			// miny -= 10;
			height -= 10;
			minx = Math.max(0, minx);
			miny = Math.max(0, miny);
			viewBoxProperties = `${minx} ${miny} ${width} ${height}`;
			console.log(viewBoxProperties);
			shape.setAttribute("viewBox", viewBoxProperties);
		});

		$("#reset").on("click", (e) => {
			const shape = document.getElementById("box");
			shape.setAttribute("viewBox", originalZoom);
		});

		$("#box").on("mousedown", (e) => {
			dragging = true;
			const shape = document.getElementById("box");
			var [minx, miny, width, height] = shape.getAttribute("viewBox").split(" ").map(Number);
			var currentZoom = oWidth / width;
			if (minX > 0 && minX < oWidth)
				dragStart.x = (minx + e.offsetX) / currentZoom;
			if (minY > 0 && minY < oHeight)
				dragStart.y = (miny + e.offsetY) / currentZoom;
			console.log(currentZoom);
		});

		$(document).on("mouseup", (e) => {
			if (dragging)
				dragging = false;
		});

		$("#box").on("mouseleave", (e) => {
			dragging = false;
		})

		$("#box").on("mousemove", (e) => {
			if (dragging) {
				const shape = document.getElementById("box");
				var [minx, miny, width, height] = shape.getAttribute("viewBox").split(" ").map(Number);
				var currentZoom = oWidth / width;
				let endX = (minx + e.offsetX) / currentZoom;
				let endY = (miny + e.offsetY) / currentZoom;
				//     ${eventLeft / width * originalWidth - originalWidth / 4} 
				let diffX = dragStart.x - endX;
				let diffY = dragStart.y - endY;

				var viewBoxProperties = shape.getAttribute("viewBox");
				console.log(diffX, diffY);
				console.log(viewBoxProperties);
				if ((minx + diffX) < oWidth && (minx + diffX) >= 0)
					minx += diffX;
				if ((miny + diffY) < oHeight && (miny + diffY) >= 0)
					miny += diffY;

				viewBoxProperties = `${minx} ${miny} ${width} ${height}`;
				// console.log(viewBoxProperties);
				shape.setAttribute("viewBox", viewBoxProperties);
			}
		});
	</script>
</head>

<body>
	<svg id="box" width="100" height="100" viewBox="0 0 100 100">
		<ellipse cx="5" cy="5" rx="5" ry="5" fill="red"></ellipse>
		<ellipse cx="25" cy="5" rx="5" ry="5"></ellipse>
		<ellipse cx="45" cy="5" rx="5" ry="5"></ellipse>
		<ellipse cx="65" cy="5" rx="5" ry="5"></ellipse>
		<ellipse cx="85" cy="5" rx="5" ry="5" fill="blue"></ellipse>
		<ellipse cx="105" cy="5" rx="5" ry="5" fill="yellow"></ellipse>
		<ellipse cx="125" cy="5" rx="5" ry="5"></ellipse>

	</svg>
	<div>
		<button id="zoomin">+</button>
		<button id="reset">reset</button>
		<button id="zoomout">-</button>
</body>

</html>